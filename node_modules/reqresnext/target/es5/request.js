"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.ReqOptions=void 0;var _express=_interopRequireDefault(require("express")),_lodash=require("lodash"),_url=_interopRequireDefault(require("url")),_util=require("./util"),_app=_interopRequireDefault(require("./app"));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),Object.defineProperty(a,"prototype",{writable:!1}),a}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var request=_express.default.request,response=_express.default.response,Request=_createClass(function b(a){_classCallCheck(this,b),(0,_util.setprototypeof)(this,request);var c=new ReqOptions(a||{});this._flush=_lodash.noop,this._readableState={},this.unpipe=_lodash.noop,this.socket=c.socket,this.app=c.app,this.res=c.res,this.headers=c.headers?(0,_util.convertKeysToLowerCase)(c.headers):{},this.body=c.body,this.params=c.params,this.connection=c.connection,(0,_util.appendAdditionalProps)(this,c.raw)});exports.default=Request;var ReqOptions=_createClass(function b(a){_classCallCheck(this,b),this.res=a.res||{},this.app=a.app||_app.default;var c={},d=a.url||"/",e=a.host?a:_url.default.parse(d);e.host=e.host||"localhost",e.protocol=e.protocol||"http";var f=new _url.default.URL(_url.default.format(e)),g=(0,_util.assign)({encrypted:"https:"===f.protocol},a.connection||{});response.header.call({set:function set(a,b){c[a]=b}},a.headers),c.host=c.host||f.host,this.headers=c,this.query=f.query,this.body=a.body,this.params=a.params||{},this.connection=g,this.raw=a,this.socket=a.socket||{}});exports.ReqOptions=ReqOptions;